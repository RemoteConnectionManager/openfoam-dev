#----------------------------------*-sh-*--------------------------------------
# Tcsh completions for OpenFOAM applications
# Using bash_completion functions for the hard work

if ($?tcsh) then  # tcsh only

    # Remove old completions, which look like:
    #   complete APPNAME 'p,*,`bash $WM_PROJECT_DIR/etc/ ...
    foreach appName (`complete | sed -ne '/WM_PROJECT/s/\t.*$//p'`)
        uncomplete $cleaned
    end

    # Generate completions for predefined directories
    foreach dirName ("$FOAM_APPBIN")
        if ( ! -d $dirName || ! -f $WM_PROJECT_DIR/etc/config.csh/complete-wrapper ) continue
        foreach appName (`find $dirName -maxdepth 1 -executable -type f`)
            # Pass explicitly
            ## complete $appName:t 'p,*,`bash $WM_PROJECT_DIR/etc/config.csh/complete-wrapper '$appName:t' "${COMMAND_LINE}"`,'
            # Pass via environment
            complete $appName:t 'p,*,`bash $WM_PROJECT_DIR/etc/config.csh/complete-wrapper '$appName:t'`,'
        end
    end
endif

#------------------------------------------------------------------------------
